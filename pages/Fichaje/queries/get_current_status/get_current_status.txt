SELECT 
    id,
    user_id,
    user_name,
    entry_time,
    exit_time,
    date,
    status,
    CASE 
        WHEN exit_time IS NULL THEN 'Dentro'
        ELSE 'Fuera'
    END as current_status
FROM public.timeclock
WHERE user_id = {{appsmith.user.id || 1}}
  AND date = CURRENT_DATE
ORDER BY entry_time DESC
LIMIT 1;

